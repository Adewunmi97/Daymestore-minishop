<h1 class="text-2xl font-bold mb-4">Order #<%= @order.id %></h1>

<div class="space-y-4">
  <div>
    <strong>Status:</strong>
    <span class="px-2 py-1 rounded-full text-white <%= @order.fulfilled? ? 'bg-green-500' : @order.pending? ? 'bg-yellow-500' : 'bg-gray-500' %>">
      <%= @order.status.capitalize %>
    </span>
  </div>

  <div><strong>Total Amount:</strong> $<%= number_with_precision(@order.total_amount, precision: 2) %></div>
  <div><strong>Payment Method:</strong> <%= @order.payment_method %></div>
  <div><strong>Payment ID:</strong> <%= @order.payment_id %></div>
  <div><strong>Paid At:</strong> <%= @order.paid_at ? @order.paid_at.strftime("%b %d, %Y %H:%M") : "Not recorded" %></div>
  <div><strong>Status Changed At:</strong> <%= @order.status_changed_at&.strftime("%b %d, %Y %H:%M") || "N/A" %></div>
</div>

<hr class="my-6">

<h2 class="text-xl font-semibold mb-3">Products</h2>

<% if @order.products.any? %>
  <ul class="space-y-2">
    <% @order.products.each do |product| %>
      <li class="border rounded p-3 flex justify-between">
        <span><%= product.title %></span>
        <span>$<%= number_with_precision(product.price, precision: 2) %></span>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>No products associated with this order.</p>
<% end %>

<div class="mt-6">
  <%= link_to "Back to Orders", orders_path, class: "text-blue-600 hover:underline" %>
</div>
