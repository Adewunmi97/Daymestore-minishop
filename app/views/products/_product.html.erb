<div class="min-h-screen py-12 sm:pt-20" data-controller="gallery">
  <div class="flex flex-col justify-center items-center md:flex-row md:items-start space-y-8 md:space-y-0 md:space-x-4 lg:space-x-8 max-w-6xl w-11/12 mx-auto">
    <div class="w-full md:w-1/2 max-w-md border border-lighter bg-white rounded shadow-lg">
      <div class="relative h-96">
        <div style="display: block; overflow: hidden; position: absolute; inset: 0px; box-sizing: border-box; margin: 0px;">
        <% if product.images.attached? %>
          <%= image_tag product.images.first, id: "displayed-image", class: "transform duration-500 ease-in-out hover:scale-110", style:"position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0,border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%", data: {"gallery-target": "display"} %>
        <% end %>
        </div>
      </div>
      <div class="relative flex border-t border-lighter">
        <div class="flex space-x-1 w-full overflow-auto border-t border-lighter" style="scroll-behavior: smooth;">
        <% if product.images.attached? %>
            <% product.images.each do |image| %>
              <button class="relative w-40 h-32 flex-shrink-0 rounded-sm ">
                <div style="display: block; overflow: hidden; position: absolute; inset: 0px; box-sizing: border-box; margin: 0px;">
                      <%= image_tag image, class: "thumbnail", data: { action: "click->gallery#display"} %>
                </div>
              </button>
            <% end %>
        <% end %>
        </div>
      </div>
    </div>
    <div class="flex flex-col justify-between h-full w-full md:w-1/2 max-w-xs mx-auto space-y-4 min-h-128">
      <div class=" font-primary">
        <h1 class="leading-relaxed font-extrabold text-3xl text-primary py-2 sm:py-4">
          <%= product.title %>
        </h1>
        <div class="text-xl text-primary font-medium py-4 px-1">
          $<span class="text-2xl"><%= product.price %>
          </span>
        </div>
      </div>


      <% if current_user&.has_purchased?(product) %>
        <p>You already own this product!</p>
      <% else %>
        <div class="w-full">
            <div id="paypal-button-container" data-price="<%= @product.price %>" class="pt-3 pb-2 bg-primary text-white w-full mt-2 rounded-sm font-body-primary font-body-semibold text-xl flex justify-center items-baseline  hover:bg-dark cursor-pointer", "aria-label": "cart-button"></div>
        </div>
      <% end %>
    </div>
  </div>
  <div class="font-medium text-lg m-20 px-8">
    <%= product.description %>
  </div>
</div>